<!DOCTYPE html>


<!-- MINECRAFT IS ELITE  -->


<html lang="en" data-color-mode="light" data-light-theme="light"
data-dark-theme="dark_tritanopia" data-a11y-animated-images="system"
data-a11y-link-underlines="true">

<head>

<link
href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=JetBrains+Mono&display=swap"
rel="stylesheet">
<meta charset="utf-8">
<link rel="dns-prefetch" href="https://github.githubassets.com">
<link rel="preconnect" href="https://github.githubassets.com" crossorigin>
<link rel="preconnect" href="https://avatars.githubusercontent.com">
<link rel="preload"
href="https://github.githubassets.com/assets/mona-sans-d1bf285e9b9b.woff2"
as="font" type="font/woff2" crossorigin>
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/light-3e154969b9f9.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/dark-9c5b7a476542.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/primer-primitives-4cf0d59ab51a.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/primer-0a1f715ee9fb.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/global-e41ff91f8baa.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/github-d3b66f11d613.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/site-ae5a61253375.css">
<link crossorigin="anonymous" media="all" rel="stylesheet"
href="https://github.githubassets.com/assets/customer-stories-09cf584c51b5.css">

<link rel="stylesheet" href="/kalulus-lil-corner/css/primer.css">
<link rel="stylesheet" href="/kalulus-lil-corner/css/projects.css">

<title>Kelly's portfolio</title>

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Hi there kind stranger!">
<meta property="og:title" content="Welcome to Kelly's website!">
<meta property="og:description"
content="Explore Kelly's projects, stories, and more.">
<meta property="og:image" content="assets/linkphoto.png">
<meta property="og:url"
content="https://hngocle404.github.io/kalulus-lil-corner/">
<meta property="og:type" content="website">
<link rel="icon" href="assets/icon.png" type="image/png">

</head>

<body class="page-responsive f4" style="word-wrap: break-word;">
<div data-turbo-body class="page-responsive f4"
style="word-wrap: break-word;">
<div class="position-relative header-wrapper js-header-wrapper">
<a href="#start-of-content" data-skip-target-assigned="false"
class="p-3 color-bg-accent-emphasis color-fg-on-emphasis show-on-focus js-skip-to-content">Skip
to content</a>
<span data-view-component="true"
class="progress-pjax-loader Progress position-fixed width-full">
<span style="width: 0%;" data-view-component="true"
class="Progress-item progress-pjax-loader-bar left-0 top-0 color-bg-accent-emphasis"></span>
</span>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/primer-react-765944243383.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/react-core-705befca9f47.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/react-lib-7b7b5264f6c1.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/octicons-react-45c3a19dd792.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/vendors-node_modules_emotion_is-prop-valid_dist_emotion-is-prop-valid_esm_js-node_modules_emo-0e630d-04276437489b.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/vendors-node_modules_oddbird_popover-polyfill_dist_popover-fn_js-4896ddd4b7bb.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/vendors-node_modules_github_catalyst_lib_index_js-node_modules_github_hotkey_dist_index_js-no-d67c7f-bd7d077cdcb1.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/ui_packages_ui-commands_ui-commands_ts-d25fac54a6bc.js"></script>
<script crossorigin="anonymous" defer="defer"
type="application/javascript"
src="https://github.githubassets.com/assets/keyboard-shortcuts-dialog-cb3d4f30c9ed.js"></script>
<div id="header-placeholder"></div>
<script>
  fetch('/kalulus-lil-corner/partials/header.html')
    .then(response => response.text())
    .then(data => {
      document.getElementById('header-placeholder').innerHTML = data;

      window.showContactPopup = function (event) {
        event.preventDefault();
        const popup = document.getElementById('contactPopup');
        if (popup) {
          popup.style.display = 'flex';
        }
      };

      window.hideContactPopup = function () {
        const popup = document.getElementById('contactPopup');
        if (popup) {
          popup.style.display = 'none';
        }
      };
    });
</script>
</div>
<main class="font-mktg">
<div
class="sub-nav-mktg js-toggler-container z-3 customer-stories-subnav js-sticky-state position-sticky width-full sub-nav-mktg-shadow ctas-always-visible">
</div>

<!-- ======== DO NOT TOUCH ABOVE THIS ============================================================================ -->



<div class="border-bottom">
<div class="pt-9 pb-4 overflow-hidden px-3">
<div class="container-xl">

<div class="p-responsive">
<p class="color-fg-muted f3-mktg text-normal mb-1">ETL & Financial ML</p>
<h1 class="h3-mktg color-fg-default mb-3 mb-md-6">ETL pipeline to prepare financial data for ML and comparing backtest overfit extent on different cross validation methods</h1>
</div>
</div>
</div>
</div>


<!-- ==================================================================================== -->


<div class="px-3 pb-8 pt-5">
<div class="container-xl">
<div class="p-responsive">
<div class="d-lg-flex flex-justify-between my-4 my-lg-6 ">




<!-- SUMMARY -->
<p>
<strong>Objectives</strong>

<br>
1. Create a simple ETL pipeline to clean and feature engineer YAHOO financial data & visualise using Streamlit
<br>
2. Use H20 AutoML to evaluate whether Rolling Window or Combinatorial Purged K-Fold has a higher chance of backtest overfit by calculating the Deflated Sharpe Ratio.
<br><br>
<strong>Note</strong>
<br>
Don't have time to train all the models & deploy & update this project so it's pretty much a preview for now.
<br><br>
<strong>Project outline</strong>
<br>
Essentially there are 2 modules to this project:<br>
<a style="font-weight: bold">Part 1 (ETL)</a> is where I load financial data and do some cleaning on it and do some feature engineering then load it to the database (local).
<br>
<a style="font-weight: bold">Part 2 (ML)</a> is where I will be loading the transformed data from Part 1, train models using H2O, then calculate DSR to see which of the 2 common financial cross validation methods is more prone to backtest overfit. 
This section is inspired by Lopez De Prado's book 'Advances in Financial Machine Learning'.
</p>
</div>


<!-- IMAGE -->
<!-- <div style="margin-bottom: 30px;">
<img src="3.PNG"
style="width: 100%; height: 300px; object-fit: cover; object-position: 0 55%; border-radius: 8px;">
</div> -->




<!-- body text -->

<h1 style="margin-bottom:30px;">1. ETL pipeline</h1>







<embed src="streamlitpdf.pdf" type="application/pdf" width="100%" height="600px">

<div class="code_block">
import numpy as np
import pandas as pd
import seaborn as sns
from IPython.display import display
import matplotlib.pyplot as plt
from datetime import datetime
import yfinance as yf
from scipy.stats import norm
import warnings
warnings.filterwarnings("ignore")
sns.set_style('white')
%matplotlib inline
</div>



<h1>2. Basic analysis of stock
information</h1>



<div class="output_block">
Stock: AMZN
VaR method: Parametric
Current price: $159.28
Loss will not exceed:
  * $3.98 per share (90% confidence)
  * $5.11 per share (95% confidence)
  * $7.22 per share (99% confidence)
</div>


<h3>Weaknesses</h3>


<!-- COLLAPSIBLE BUTTONS ======================================================================== -->


<div>
  <button class="collapsible">
    W1: Financial difficulty and high debt
    <span class="icon">
      <svg class="icon-down" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m6 9 6 6 6-6" />
      </svg>
      <svg class="icon-up" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m18 15-6-6-6 6" />
      </svg>
    </span>
  </button>
  <div class="content">
    <p>
      The situation for HAG remains tough as there are large debt payments
      and continuing high interest levels. In the recent past, HAG also
      had to sell many properties to clear some debts; this results in
    </p>
  </div>
</div>


<div>
  <button class="collapsible">
    W1: Financial difficulty and high debt
    <span class="icon">
      <svg class="icon-down" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m6 9 6 6 6-6" />
      </svg>
      <svg class="icon-up" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m18 15-6-6-6 6" />
      </svg>
    </span>
  </button>
  <div class="content">
    <p>
      The situation for HAG remains tough as there are large debt payments
      and continuing high interest levels. In the recent past, HAG also
      had to sell many properties to clear some debts; this results in
    </p>
  </div>
</div>

<!-- COLLAPSIBLE CODE ======================================================================== -->


<div>
  <button class="collapsible_code">See full code •ᴗ•
    <span class="icon">
      <svg class="icon-down" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m6 9 6 6 6-6" />
      </svg>
      <svg class="icon-up" xmlns="http://www.w3.org/2000/svg" width="24"
        height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="m18 15-6-6-6 6" />
      </svg>
    </span>
  </button>
  <div class="content_code">
def VaR_montecarlo(company, days, rep):
    sim_results = []
    current_price = all_close['AAPL'].sort_index(ascending=False).iloc[0]
    initial_price = all_close['AAPL'].sort_index(ascending=True).iloc[0]
    
    for i in range(1, rep+1):
        prediction = price_montecarlo('AAPL', days).iloc[-1]['Simulated price']
        sim_results.append({
            'Simulation': i,
            'Prediction': prediction,
            'Loss': current_price - prediction
        })
    
    sim_results_df = pd.DataFrame(sim_results)
    alpha = [0.1, 0.05, 0.01]
    print(f'Stock: {company}')
    print('VaR method: Monte Carlo')
    print(f'Current price: ${current_price:.2f}')
    print(f'Loss will not exceed:')
    
    for i in alpha:
        cutoff = sim_results_df['Prediction'].quantile(i)
        var = current_price - cutoff
        print(f'  * ${var:.2f} per share ({(1-i)*100:.0f}% confidence)')
    
    plt.figure(figsize=(10.5, 3))
    sns.histplot(
        data=sim_results_df,
        x='Loss',
        color=company_colours[company],
        alpha=1,
        kde=True
    )
    plt.title(f'Monte Carlo simulation for {company} stock VaR, {rep} repetitions')
  </div>
</div>







<h1>2. Basic analysis of stock
  information</h1>
<h2>header numberrrrrr 2</h3>
<h3>
  Opportunities</h3>
<h4>header 4</h4>

<p>Various forms of backtesting could be used to assess and
enhance the reliability of VaR models. One suggested approach
is the Kupiec's proportion-of-failures (POF) test, which is a
simple and straihtforward statistical method that evaluates
the accuracy of VaR predictions.</p>


<h4>ksidfkzdsfhkdhf</h4>
<p>Various forms of backtesting could be used to assess and
  enhance the reliability of VaR models. One suggested approach
  is the Kupiec's proportion-of-failures (POF) test, which is a
  simple and straihtforward statistical method that evaluates
  the accuracy of VaR predictions.</p>

<h4>ksidfkzdsfhkdhf</h4>
<p>Various forms of backtesting could be used to assess and
  enhance the reliability of VaR models. One suggested approach
  is the Kupiec's proportion-of-failures (POF) test, which is a
  simple and straihtforward statistical method that evaluates
  the accuracy of VaR predictions.</p>



<!-- ======== DO NOT TOUCH BELOW THIS ============================================================================ -->


</main>



<script>
  document.addEventListener('DOMContentLoaded', () => {
    const collapsibleSelectors = ['.collapsible', '.collapsible_code'];

    collapsibleSelectors.forEach(selector => {
      const buttons = document.querySelectorAll(selector);

      buttons.forEach(button => {
        const content = button.nextElementSibling;

        if (content && content.className.startsWith('content')) {
          content.style.display = 'none';

          // Add toggle behavior to the content itself
          content.addEventListener('click', () => {
            const isActive = button.classList.contains('active');

            if (isActive) {
              button.classList.remove('active');
              content.style.display = 'none';
            }
          });
        }

        button.addEventListener('click', function () {
          const isActive = this.classList.contains('active');

          buttons.forEach(btn => {
            btn.classList.remove('active');
            const sibling = btn.nextElementSibling;
            if (sibling && sibling.className.startsWith('content')) {
              sibling.style.display = 'none';
            }
          });

          if (!isActive) {
            this.classList.add('active');
            if (content && content.className.startsWith('content')) {
              content.style.display = 'block';
            }
          }
        });
      });
    });
  });
</script>


<!-- ======================================================================================== -->



<div id="footer-placeholder"></div>
<script>
fetch('/kalulus-lil-corner/partials/footer.html')
.then(response => response.text())
.then(data => {
document.getElementById('footer-placeholder').innerHTML = data;
});
</script>


</body>

</html>